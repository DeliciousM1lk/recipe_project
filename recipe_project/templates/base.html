<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}RecipeBook - –õ—É—á—à–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="{% url 'home' %}" class="logo">üç≥ RecipeBook</a>
            <nav>
                <ul>
                    <li><a href="{% url 'recipe_list' %}">–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</a></li>
                    {% if user.is_authenticated %}
                        <li><a href="{% url 'recipe_add' %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</a></li>
                        <li><a href="{% url 'profile' %}">–ü—Ä–æ—Ñ–∏–ª—å ({{ user.username }})</a></li>
                        <li>
                            <form method="post" action="{% url 'logout' %}" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" class="logout-link">–í—ã–π—Ç–∏</button>
                            </form>
                        </li>
                    {% else %}
                        <li><a href="{% url 'login' %}">–í–æ–π—Ç–∏</a></li>
                        <li><a href="{% url 'register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            {% if messages %}
                {% for message in messages %}
                <div class="message-alert {{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            {% endif %}
            {% block content %}{% endblock %}
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 RecipeBook. –°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –∫ –∫—É–ª–∏–Ω–∞—Ä–∏–∏. </p>
        </div>
    </footer>

    {% if user.is_authenticated and not user.is_active %}
    <div id="activationModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="document.getElementById('activationModal').style.display='none'">&times;</span>
            <h2>üö® –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
            <p>–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∞–π—Ç–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É (<strong>{{ user.email }}</strong>) –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ.</p>
            <p>–ï—Å–ª–∏ –≤—ã –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –ø–∏—Å—å–º–æ, –≤—ã –º–æ–∂–µ—Ç–µ <a href="{% url 'resend_activation_email' %}" class="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ</a>.</p>
        </div>
    </div>

    <script>
        window.onload = function() {
            var modal = document.getElementById('activationModal');
            var closeBtn = document.querySelector('.close-button');

            if (modal && !window.location.pathname.includes('/activate/')) {
                modal.style.display = "block";

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
            }
        }
    </script>
    {% endif %}
</body>
</html>